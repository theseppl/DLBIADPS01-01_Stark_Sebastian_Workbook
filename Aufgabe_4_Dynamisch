class DynamischerAktivitaetsWaehler:
    def __init__(self, alleAktivitaeten):
        self.gesamtAngebotAktivitaeten = alleAktivitaeten

    def waehleAktivitaeten(self):
        # Sortiere Aktivitäten nach Endzeit
        self.gesamtAngebotAktivitaeten.sort(key=lambda x: x[1])
        laengeGesamtListe = len(self.gesamtAngebotAktivitaeten)

        # Array welches die maximale Anzahl an Aktivitäten bis zur i-ten Aktivität speichert
        arrayMaxAnzahlAktivitaeten = [0] * laengeGesamtListe
        arrayVorhergehendeAktivitaeten = [-1] * laengeGesamtListe  # Für die Rückverfolgung der Aktivitäten
        arrayMaxAnzahlAktivitaeten[0] = 1  # Die erste Aktivität kann immer gewählt werden. Also eine Aktivität...

        for i in range(1, laengeGesamtListe):
            # Möglichkeit 1: Diese Aktivität wählen
            waehlen = 1
            letzteOhneUeberschneidung = -1
            for j in range(i - 1, -1, -1):
                if self.gesamtAngebotAktivitaeten[j][1] <= self.gesamtAngebotAktivitaeten[i][0]:  # Keine Überschneidung
                    waehlen += arrayMaxAnzahlAktivitaeten[j]
                    letzteOhneUeberschneidung = j
                    break

            # Möglichkeit 2: Diese Aktivität ignorieren
            auschliessen = arrayMaxAnzahlAktivitaeten[i - 1]

            # Wähle die bessere Möglichkeit und speichere die Entscheidung
            if waehlen > auschliessen:
                arrayMaxAnzahlAktivitaeten[i] = waehlen
                arrayVorhergehendeAktivitaeten[i] = letzteOhneUeberschneidung
            else:
                arrayMaxAnzahlAktivitaeten[i] = auschliessen
                arrayVorhergehendeAktivitaeten[i] = arrayVorhergehendeAktivitaeten[i - 1]

        # Rekonstruiere die Liste der ausgewählten Aktivitäten
        ausgewaehlteAktivitaeten = []
        i = laengeGesamtListe - 1
        while i >= 0:
            if arrayVorhergehendeAktivitaeten[i] != arrayVorhergehendeAktivitaeten[i - 1]:  # Diese Aktivität wurde gewählt
                ausgewaehlteAktivitaeten.append(self.gesamtAngebotAktivitaeten[i])
                i = arrayVorhergehendeAktivitaeten[i]
            else:
                i -= 1

        ausgewaehlteAktivitaeten.reverse()  # Aktivitäten in chronologischer Reihenfolge ausgeben
        return arrayMaxAnzahlAktivitaeten[-1], ausgewaehlteAktivitaeten

# Beispiel
aktivitaeten = [(2, 4), (2, 5), (5, 6), (6, 8), (1, 6)]
selector = DynamischerAktivitaetsWaehler(aktivitaeten)
max_activities, selected_activities = selector.waehleAktivitaeten()
print("Maximale Anzahl Aktivitäten (Dynamisch):", max_activities)
print("Ausgewählte Aktivitäten:", selected_activities)

